{
  "info": {
    "_postman_id": "6d37b530-2a5b-4c36-a8db-12edbb25b63f",
    "name": "FC2_MB_HYOV",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "MB - Set 1",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "var value;\r",
              "if (pm.response.code == 200) {\r",
              "    value = JSON.parse(responseBody);\r",
              "}\r",
              "pm.test(\"Status code is 200\", function () {\r",
              "    pm.response.to.have.status(200);\r",
              "});\r",
              "\r",
              "pm.test('Verify Response headers', function () {\r",
              "    var identifier = \"csv_header\";\r",
              "    var expected = \"FlowControl_Return_Code,hy_z4fn,hy_errcode,hy_MatchLevel,hy_addr1,hy_addr2,hy_city,hy_state,hy_zip,hy_zip4,zip11,hy_pre_directional,hy_street_number,hy_street_name,hy_street_suffix,hy_post_directional,hy_unit,hy_unit_number,hy_dpc,hy_check_digit,hy_crrt,hy_urb,pinning_individual_id,pinning_household_id,pinning_address_id,pinning_matchReturnType,pinning_Return_Code\";\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "let recordMap = new Map([\r",
              "    [\"rec1\", \"FC000,-1-07,07,,,,,,,,,,,,,,,,,,,,Y.ID1,Y.HID1,Y.AID1,,VG000\"],\r",
              "    [\"rec2\", \"FC000,-99,57,,,,,,,,,,,,,,,,,,,,Y.ID2,Y.HID2,Y.AID2,,VG000\"],\r",
              "    [\"rec3\", \"FC000,-99,57,,,,,,,,,,,,,,,,,,,,Y.ID3,Y.HID3,Y.AID3,,E0018\"],\r",
              "    [\"rec4\", \"FC000,1,,,,,,,,,,,,,,,,,,,,,Y.ID4,Y.HID4,Y.AID4,,VG000\"]\r",
              "]);\r",
              "\r",
              "for (let [mapKey, mapValue] of recordMap) {\r",
              "    var actualArray = value[mapKey].split(',');\r",
              "    var expectedArray = mapValue.split(',');\r",
              "    var individual_id = expectedArray[22].split('.');\r",
              "    var household_id = expectedArray[23].split('.');\r",
              "    var address_id = expectedArray[24].split('.');\r",
              "\r",
              "    pm.test(\"Verify \" + mapKey + \" return code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" return code\", expectedArray[26] + \"*\" + actualArray[26]);\r",
              "        pm.expect(actualArray[26]).to.equal(expectedArray[26]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" return code\", \"PASS\");\r",
              "    });\r",
              "\r",
              "    pm.test(\"Verify \" + mapKey + \" match code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" match code\", expectedArray[25] + \"*\" + actualArray[25]);\r",
              "        pm.expect(actualArray[25]).to.equal(expectedArray[25]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" match code\", \"PASS\");\r",
              "    });\r",
              "\r",
              "    pm.test(\"Verify \" + mapKey + \" Z4FN code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" Z4FN code\", expectedArray[1] + \"*\" + actualArray[1]);\r",
              "        pm.expect(actualArray[1]).to.equal(expectedArray[1]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" Z4FN code\", \"PASS\");\r",
              "    });\r",
              "    pm.test(\"Verify \" + mapKey + \" ErrCode code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" ErrCode code\", expectedArray[2] + \"*\" + actualArray[2]);\r",
              "        pm.expect(actualArray[2]).to.equal(expectedArray[2]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" ErrCode code\", \"PASS\");\r",
              "    });\r",
              "\r",
              "\r",
              "    //Verifying IID length/value\r",
              "    if (individual_id[0] == \"Y\") {\r",
              "        var testName = \"Verify \" + mapKey + \" Individual ID length\";\r",
              "        var found = actualArray[22];\r",
              "        pm.test(testName, function () {\r",
              "            var expected = 15;\r",
              "            pm.collectionVariables.set(testName, expected + \"*\" + found);\r",
              "            pm.expect(found).is.length.greaterThan(expected);\r",
              "            pm.collectionVariables.set(testName, \"PASS\");\r",
              "        });\r",
              "        pm.collectionVariables.set(individual_id[1], found);\r",
              "        console.log(\"INDIVIDUAL_ID - \" + individual_id[1] + \" is set as \" + found);\r",
              "    }\r",
              "\r",
              "    var testNameInd = \"Verify \" + mapKey + \" Individual ID\";\r",
              "    (individual_id[0] === \"Y\" ? pm.test.skip : pm.test)(testNameInd, () => {\r",
              "        var expected = String(pm.collectionVariables.get(individual_id[0]));\r",
              "        var found = actualArray[22];\r",
              "        if (individual_id[0] == '') {\r",
              "            pm.collectionVariables.set(testNameInd, \"Blank\" + \"*\" + found);\r",
              "            pm.expect(found).to.equal(\"\");\r",
              "        } else {\r",
              "            pm.collectionVariables.set(testNameInd, expected + \"*\" + found);\r",
              "            pm.expect(found).to.equal(expected);\r",
              "        }\r",
              "        pm.collectionVariables.set(testNameInd, \"PASS\");\r",
              "    });\r",
              "\r",
              "    //Verifying HID length/value\r",
              "    if (household_id[0] == \"Y\") {\r",
              "        var testName = \"Verify \" + mapKey + \" Household ID length\";\r",
              "        var found = actualArray[23];\r",
              "        pm.test(testName, function () {\r",
              "            var expected = 15;\r",
              "            pm.collectionVariables.set(testName, expected + \"*\" + found);\r",
              "            pm.expect(found).is.length.greaterThan(expected);\r",
              "            pm.collectionVariables.set(testName, \"PASS\");\r",
              "        });\r",
              "        pm.collectionVariables.set(household_id[1], found);\r",
              "        console.log(\"HOUSEHOLD_ID - \" + household_id[1] + \" is set as \" + found);\r",
              "    }\r",
              "\r",
              "    var testNameHld = \"Verify \" + mapKey + \" Household ID\";\r",
              "    (household_id[0] === \"Y\" ? pm.test.skip : pm.test)(testNameHld, () => {\r",
              "        var expected = String(pm.collectionVariables.get(household_id[0]));\r",
              "        var found = actualArray[23];\r",
              "        if (household_id[0] == '') {\r",
              "            pm.collectionVariables.set(testNameHld, \"Blank\" + \"*\" + found);\r",
              "            pm.expect(found).to.equal(\"\");\r",
              "        } else {\r",
              "            pm.collectionVariables.set(testNameHld, expected + \"*\" + found);\r",
              "            pm.expect(found).to.equal(expected);\r",
              "        }\r",
              "        pm.collectionVariables.set(testNameHld, \"PASS\");\r",
              "    });\r",
              "\r",
              "    //Verifying AID length/value\r",
              "    if (address_id[0] == \"Y\") {\r",
              "        var testName = \"Verify \" + mapKey + \" Address ID length\";\r",
              "        var found = actualArray[24];\r",
              "        pm.test(testName, function () {\r",
              "            var expected = 15;\r",
              "            pm.collectionVariables.set(testName, expected + \"*\" + found);\r",
              "            pm.expect(found).is.length.greaterThan(expected);\r",
              "            pm.collectionVariables.set(testName, \"PASS\");\r",
              "        });\r",
              "        pm.collectionVariables.set(address_id[1], found);\r",
              "        console.log(\"ADDRESS_ID - \" + address_id[1] + \" is set as \" + found);\r",
              "    }\r",
              "\r",
              "    var testNameAid = \"Verify \" + mapKey + \" Address ID\";\r",
              "    (address_id[0] === \"Y\" ? pm.test.skip : pm.test)(testNameAid, () => {\r",
              "        var expected = String(pm.collectionVariables.get(address_id[0]));\r",
              "        var found = actualArray[24];\r",
              "        if (address_id[0] == '') {\r",
              "            pm.collectionVariables.set(testNameAid, \"Blank\" + \"*\" + found);\r",
              "            pm.expect(found).to.equal(\"\");\r",
              "        } else {\r",
              "            pm.collectionVariables.set(testNameAid, expected + \"*\" + found);\r",
              "            pm.expect(found).to.equal(expected);\r",
              "        }\r",
              "        pm.collectionVariables.set(testNameAid, \"PASS\");\r",
              "    });\r",
              "}\r",
              "\r",
              "pm.test(\"Verify record_count_processed\", function () {\r",
              "    var identifier = \"record_count_processed\";\r",
              "    var expected = 4;\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "pm.test(\"Verify record_count_error\", function () {\r",
              "    var identifier = \"record_count_error\";\r",
              "    var expected = 0;\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "var verifyList = _.keys(pm.collectionVariables.toObject());\r",
              "_.each(verifyList, (arrItem) => {\r",
              "    if (arrItem.includes(\"Verify\")) {\r",
              "        if (pm.collectionVariables.get(arrItem) != \"PASS\") {\r",
              "            var values = pm.collectionVariables.get(arrItem).split(\"*\");\r",
              "            console.log(\"===\" + arrItem + \"===\");\r",
              "            console.log(\"Expected : \" + values[0]);\r",
              "            console.log(\"Found    : \" + values[1]);\r",
              "            pm.collectionVariables.unset(arrItem);\r",
              "        }\r",
              "    }\r",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"Run_Flow\": {\n        \"Standard_Service_Elements\": {\n            \"Operation\": \"Run_Flow_Microbatch\"\n        },\n        \"Input\": {\n            \"partyID\": \"25469\",\n            \"delimiter\": \",\",\n            \"inquiryonly\": \"false\",\n            \"layout\": \"fname,mname,lname,suffix,gender,dob,addr1,addr2,city,state,zip,email,phone\",\n            \"rec1\": \"Jaimehyovmb,Ale,Rioshyovmb,,Male,,105 N 5th Street,APT 713,Barnsdall,OK,74002,Rios987@email.com,(987) 696-94987\",\n            \"rec2\": \"Austinhyovmb,,Castanedahyovmb,jr,gender,1966,,,,,,austin987@hotmail.com,\",\n            \"rec3\": \"Jaimehyovmb,,Hardinghyovmb,,,,,,,,,,\",\n            \"rec4\": \"Rogerhyovmb,,Creekhyovmb,,,,2548 W Desert Inn Rd suite 100 las vegas NV 89109,,,,,,\"\n        },\n        \"Flow\": {\n            \"Model_Options\": {\n                \"Return_Hygiene_Fields\": \"true\"\n            },\n            \"model\": \"hyov\"\n        }\n    }\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{URL}}/TreeFiddy/microbatch",
          "host": [
            "{{URL}}"
          ],
          "path": [
            "TreeFiddy",
            "microbatch"
          ]
        }
      },
      "response": []
    },
    {
      "name": "MB - Set 2",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "var value;\r",
              "if (pm.response.code == 200) {\r",
              "    value = JSON.parse(responseBody);\r",
              "}\r",
              "pm.test(\"Status code is 200\", function () {\r",
              "    pm.response.to.have.status(200);\r",
              "});\r",
              "\r",
              "pm.test('Verify Response headers', function () {\r",
              "    var identifier = \"csv_header\";\r",
              "    var expected = \"FlowControl_Return_Code,hy_z4fn,hy_errcode,hy_MatchLevel,hy_addr1,hy_addr2,hy_city,hy_state,hy_zip,hy_zip4,zip11,hy_pre_directional,hy_street_number,hy_street_name,hy_street_suffix,hy_post_directional,hy_unit,hy_unit_number,hy_dpc,hy_check_digit,hy_crrt,hy_urb,pinning_individual_id,pinning_household_id,pinning_address_id,pinning_matchReturnType,pinning_Return_Code\";\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "let recordMap = new Map([\r",
              "    [\"rec1\", \"FC000,-99,15,,,,,,,,,,,,,,,,,,,,Y.ID5,Y.HID5,Y.AID5,,VG000\"],\r",
              "    [\"rec2\", \"FC000,-99,57,,,,,,,,,,,,,,,,,,,,Y.ID6,,,,VG000\"],\r",
              "    [\"rec3\", \"FC000,-3-11,11,,,,,,,,,,,,,,,,,,,,,,Y.AID7,,E0019\"],\r",
              "    [\"rec4\", \"FC000,1,,,,,,,,,,,,,,,,,,,,,,,Y.AID8,,E0020\"]\r",
              "]);\r",
              "\r",
              "for (let [mapKey, mapValue] of recordMap) {\r",
              "    var actualArray = value[mapKey].split(',');\r",
              "    var expectedArray = mapValue.split(',');\r",
              "    var individual_id = expectedArray[22].split('.');\r",
              "    var household_id = expectedArray[23].split('.');\r",
              "    var address_id = expectedArray[24].split('.');\r",
              "\r",
              "    pm.test(\"Verify \" + mapKey + \" return code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" return code\", expectedArray[26] + \"*\" + actualArray[26]);\r",
              "        pm.expect(actualArray[26]).to.equal(expectedArray[26]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" return code\", \"PASS\");\r",
              "    });\r",
              "\r",
              "    pm.test(\"Verify \" + mapKey + \" match code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" match code\", expectedArray[25] + \"*\" + actualArray[25]);\r",
              "        pm.expect(actualArray[25]).to.equal(expectedArray[25]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" match code\", \"PASS\");\r",
              "    });\r",
              "\r",
              "    pm.test(\"Verify \" + mapKey + \" Z4FN code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" Z4FN code\", expectedArray[1] + \"*\" + actualArray[1]);\r",
              "        pm.expect(actualArray[1]).to.equal(expectedArray[1]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" Z4FN code\", \"PASS\");\r",
              "    });\r",
              "    pm.test(\"Verify \" + mapKey + \" ErrCode code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" ErrCode code\", expectedArray[2] + \"*\" + actualArray[2]);\r",
              "        pm.expect(actualArray[2]).to.equal(expectedArray[2]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" ErrCode code\", \"PASS\");\r",
              "    });\r",
              "\r",
              "\r",
              "    //Verifying IID length/value\r",
              "    if (individual_id[0] == \"Y\") {\r",
              "        var testName = \"Verify \" + mapKey + \" Individual ID length\";\r",
              "        var found = actualArray[22];\r",
              "        pm.test(testName, function () {\r",
              "            var expected = 15;\r",
              "            pm.collectionVariables.set(testName, expected + \"*\" + found);\r",
              "            pm.expect(found).is.length.greaterThan(expected);\r",
              "            pm.collectionVariables.set(testName, \"PASS\");\r",
              "        });\r",
              "        pm.collectionVariables.set(individual_id[1], found);\r",
              "        console.log(\"INDIVIDUAL_ID - \" + individual_id[1] + \" is set as \" + found);\r",
              "    }\r",
              "\r",
              "    var testNameInd = \"Verify \" + mapKey + \" Individual ID\";\r",
              "    (individual_id[0] === \"Y\" ? pm.test.skip : pm.test)(testNameInd, () => {\r",
              "        var expected = String(pm.collectionVariables.get(individual_id[0]));\r",
              "        var found = actualArray[22];\r",
              "        if (individual_id[0] == '') {\r",
              "            pm.collectionVariables.set(testNameInd, \"Blank\" + \"*\" + found);\r",
              "            pm.expect(found).to.equal(\"\");\r",
              "        } else {\r",
              "            pm.collectionVariables.set(testNameInd, expected + \"*\" + found);\r",
              "            pm.expect(found).to.equal(expected);\r",
              "        }\r",
              "        pm.collectionVariables.set(testNameInd, \"PASS\");\r",
              "    });\r",
              "\r",
              "    //Verifying HID length/value\r",
              "    if (household_id[0] == \"Y\") {\r",
              "        var testName = \"Verify \" + mapKey + \" Household ID length\";\r",
              "        var found = actualArray[23];\r",
              "        pm.test(testName, function () {\r",
              "            var expected = 15;\r",
              "            pm.collectionVariables.set(testName, expected + \"*\" + found);\r",
              "            pm.expect(found).is.length.greaterThan(expected);\r",
              "            pm.collectionVariables.set(testName, \"PASS\");\r",
              "        });\r",
              "        pm.collectionVariables.set(household_id[1], found);\r",
              "        console.log(\"HOUSEHOLD_ID - \" + household_id[1] + \" is set as \" + found);\r",
              "    }\r",
              "\r",
              "    var testNameHld = \"Verify \" + mapKey + \" Household ID\";\r",
              "    (household_id[0] === \"Y\" ? pm.test.skip : pm.test)(testNameHld, () => {\r",
              "        var expected = String(pm.collectionVariables.get(household_id[0]));\r",
              "        var found = actualArray[23];\r",
              "        if (household_id[0] == '') {\r",
              "            pm.collectionVariables.set(testNameHld, \"Blank\" + \"*\" + found);\r",
              "            pm.expect(found).to.equal(\"\");\r",
              "        } else {\r",
              "            pm.collectionVariables.set(testNameHld, expected + \"*\" + found);\r",
              "            pm.expect(found).to.equal(expected);\r",
              "        }\r",
              "        pm.collectionVariables.set(testNameHld, \"PASS\");\r",
              "    });\r",
              "\r",
              "    //Verifying AID length/value\r",
              "    if (address_id[0] == \"Y\") {\r",
              "        var testName = \"Verify \" + mapKey + \" Address ID length\";\r",
              "        var found = actualArray[24];\r",
              "        pm.test(testName, function () {\r",
              "            var expected = 15;\r",
              "            pm.collectionVariables.set(testName, expected + \"*\" + found);\r",
              "            pm.expect(found).is.length.greaterThan(expected);\r",
              "            pm.collectionVariables.set(testName, \"PASS\");\r",
              "        });\r",
              "        pm.collectionVariables.set(address_id[1], found);\r",
              "        console.log(\"ADDRESS_ID - \" + address_id[1] + \" is set as \" + found);\r",
              "    }\r",
              "\r",
              "    var testNameAid = \"Verify \" + mapKey + \" Address ID\";\r",
              "    (address_id[0] === \"Y\" ? pm.test.skip : pm.test)(testNameAid, () => {\r",
              "        var expected = String(pm.collectionVariables.get(address_id[0]));\r",
              "        var found = actualArray[24];\r",
              "        if (address_id[0] == '') {\r",
              "            pm.collectionVariables.set(testNameAid, \"Blank\" + \"*\" + found);\r",
              "            pm.expect(found).to.equal(\"\");\r",
              "        } else {\r",
              "            pm.collectionVariables.set(testNameAid, expected + \"*\" + found);\r",
              "            pm.expect(found).to.equal(expected);\r",
              "        }\r",
              "        pm.collectionVariables.set(testNameAid, \"PASS\");\r",
              "    });\r",
              "}\r",
              "\r",
              "pm.test(\"Verify record_count_processed\", function () {\r",
              "    var identifier = \"record_count_processed\";\r",
              "    var expected = 4;\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "pm.test(\"Verify record_count_error\", function () {\r",
              "    var identifier = \"record_count_error\";\r",
              "    var expected = 0;\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "var verifyList = _.keys(pm.collectionVariables.toObject());\r",
              "_.each(verifyList, (arrItem) => {\r",
              "    if (arrItem.includes(\"Verify\")) {\r",
              "        if (pm.collectionVariables.get(arrItem) != \"PASS\") {\r",
              "            var values = pm.collectionVariables.get(arrItem).split(\"*\");\r",
              "            console.log(\"===\" + arrItem + \"===\");\r",
              "            console.log(\"Expected : \" + values[0]);\r",
              "            console.log(\"Found    : \" + values[1]);\r",
              "            pm.collectionVariables.unset(arrItem);\r",
              "        }\r",
              "    }\r",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"Run_Flow\": {\n        \"Standard_Service_Elements\": {\n            \"Operation\": \"Run_Flow_Microbatch\"\n        },\n        \"Input\": {\n            \"partyID\": \"2813\",\n            \"delimiter\": \",\",\n            \"inquiryonly\": \"false\",\n            \"layout\": \"fname,mname,lname,suffix,gender,dob,addr1,addr2,city,state,zip,email,phone\",\n            \"rec1\": \"Thaliahyovmb,,Spencerhyovmb,,,,6533 River Loft Lane,Apt 1N,Charleston,WV,25320,Thalia_Sp987@email.com,(987) 320-14987\",\n            \"rec2\": \"Kaelahyovmb,B,Wisehyovmb,,,,,,,,,,(987) 624-14987\",\n            \"rec3\": \",,,,F,,563 E 23 S,APT 7,PATERSON,NJ,07514,,\",\n            \"rec4\": \"L,,P,,,,3 Saunders Wy,,Ellsworth,ME,04605,,\"\n        },\n        \"Flow\": {\n            \"Model_Options\": {\n                \"Return_Hygiene_Fields\": \"true\"\n            },\n            \"model\": \"hyov\"\n        }\n    }\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{URL}}/TreeFiddy/microbatch",
          "host": [
            "{{URL}}"
          ],
          "path": [
            "TreeFiddy",
            "microbatch"
          ]
        }
      },
      "response": []
    },
    {
      "name": "MB - Set 3",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "var value;\r",
              "if (pm.response.code == 200) {\r",
              "    value = JSON.parse(responseBody);\r",
              "}\r",
              "pm.test(\"Status code is 200\", function () {\r",
              "    pm.response.to.have.status(200);\r",
              "});\r",
              "\r",
              "pm.test('Verify Response headers', function () {\r",
              "    var identifier = \"csv_header\";\r",
              "    var expected = \"FlowControl_Return_Code,hy_z4fn,hy_errcode,hy_MatchLevel,hy_addr1,hy_addr2,hy_city,hy_state,hy_zip,hy_zip4,zip11,hy_pre_directional,hy_street_number,hy_street_name,hy_street_suffix,hy_post_directional,hy_unit,hy_unit_number,hy_dpc,hy_check_digit,hy_crrt,hy_urb,pinning_individual_id,pinning_household_id,pinning_address_id,pinning_matchReturnType,pinning_Return_Code\";\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "let recordMap = new Map([\r",
              "    [\"rec1\", \"FC000,-1-07,07,,,,,,,,,,,,,,,,,,,,ID1,HID1,AID1,EXPERIAN,VE000\"],\r",
              "    [\"rec2\", \"FC000,-99,57,,,,,,,,,,,,,,,,,,,,Y.ID10,,Y.AID10,,N0000\"],\r",
              "    [\"rec3\", \"FC000,-99,57,,,,,,,,,,,,,,,,,,,,Y.ID11,Y.HID11,Y.AID11,,E0021\"]\r",
              "]);\r",
              "\r",
              "for (let [mapKey, mapValue] of recordMap) {\r",
              "    var actualArray = value[mapKey].split(',');\r",
              "    var expectedArray = mapValue.split(',');\r",
              "    var individual_id = expectedArray[22].split('.');\r",
              "    var household_id = expectedArray[23].split('.');\r",
              "    var address_id = expectedArray[24].split('.');\r",
              "\r",
              "    pm.test(\"Verify \" + mapKey + \" return code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" return code\", expectedArray[26] + \"*\" + actualArray[26]);\r",
              "        pm.expect(actualArray[26]).to.equal(expectedArray[26]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" return code\", \"PASS\");\r",
              "    });\r",
              "\r",
              "    pm.test(\"Verify \" + mapKey + \" match code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" match code\", expectedArray[25] + \"*\" + actualArray[25]);\r",
              "        pm.expect(actualArray[25]).to.equal(expectedArray[25]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" match code\", \"PASS\");\r",
              "    });\r",
              "\r",
              "    pm.test(\"Verify \" + mapKey + \" Z4FN code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" Z4FN code\", expectedArray[1] + \"*\" + actualArray[1]);\r",
              "        pm.expect(actualArray[1]).to.equal(expectedArray[1]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" Z4FN code\", \"PASS\");\r",
              "    });\r",
              "    pm.test(\"Verify \" + mapKey + \" ErrCode code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" ErrCode code\", expectedArray[2] + \"*\" + actualArray[2]);\r",
              "        pm.expect(actualArray[2]).to.equal(expectedArray[2]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" ErrCode code\", \"PASS\");\r",
              "    });\r",
              "\r",
              "\r",
              "    //Verifying IID length/value\r",
              "    if (individual_id[0] == \"Y\") {\r",
              "        var testName = \"Verify \" + mapKey + \" Individual ID length\";\r",
              "        var found = actualArray[22];\r",
              "        pm.test(testName, function () {\r",
              "            var expected = 15;\r",
              "            pm.collectionVariables.set(testName, expected + \"*\" + found);\r",
              "            pm.expect(found).is.length.greaterThan(expected);\r",
              "            pm.collectionVariables.set(testName, \"PASS\");\r",
              "        });\r",
              "        pm.collectionVariables.set(individual_id[1], found);\r",
              "        console.log(\"INDIVIDUAL_ID - \" + individual_id[1] + \" is set as \" + found);\r",
              "    }\r",
              "\r",
              "    var testNameInd = \"Verify \" + mapKey + \" Individual ID\";\r",
              "    (individual_id[0] === \"Y\" ? pm.test.skip : pm.test)(testNameInd, () => {\r",
              "        var expected = String(pm.collectionVariables.get(individual_id[0]));\r",
              "        var found = actualArray[22];\r",
              "        if (individual_id[0] == '') {\r",
              "            pm.collectionVariables.set(testNameInd, \"Blank\" + \"*\" + found);\r",
              "            pm.expect(found).to.equal(\"\");\r",
              "        } else {\r",
              "            pm.collectionVariables.set(testNameInd, expected + \"*\" + found);\r",
              "            pm.expect(found).to.equal(expected);\r",
              "        }\r",
              "        pm.collectionVariables.set(testNameInd, \"PASS\");\r",
              "    });\r",
              "\r",
              "    //Verifying HID length/value\r",
              "    if (household_id[0] == \"Y\") {\r",
              "        var testName = \"Verify \" + mapKey + \" Household ID length\";\r",
              "        var found = actualArray[23];\r",
              "        pm.test(testName, function () {\r",
              "            var expected = 15;\r",
              "            pm.collectionVariables.set(testName, expected + \"*\" + found);\r",
              "            pm.expect(found).is.length.greaterThan(expected);\r",
              "            pm.collectionVariables.set(testName, \"PASS\");\r",
              "        });\r",
              "        pm.collectionVariables.set(household_id[1], found);\r",
              "        console.log(\"HOUSEHOLD_ID - \" + household_id[1] + \" is set as \" + found);\r",
              "    }\r",
              "\r",
              "    var testNameHld = \"Verify \" + mapKey + \" Household ID\";\r",
              "    (household_id[0] === \"Y\" ? pm.test.skip : pm.test)(testNameHld, () => {\r",
              "        var expected = String(pm.collectionVariables.get(household_id[0]));\r",
              "        var found = actualArray[23];\r",
              "        if (household_id[0] == '') {\r",
              "            pm.collectionVariables.set(testNameHld, \"Blank\" + \"*\" + found);\r",
              "            pm.expect(found).to.equal(\"\");\r",
              "        } else {\r",
              "            pm.collectionVariables.set(testNameHld, expected + \"*\" + found);\r",
              "            pm.expect(found).to.equal(expected);\r",
              "        }\r",
              "        pm.collectionVariables.set(testNameHld, \"PASS\");\r",
              "    });\r",
              "\r",
              "    //Verifying AID length/value\r",
              "    if (address_id[0] == \"Y\") {\r",
              "        var testName = \"Verify \" + mapKey + \" Address ID length\";\r",
              "        var found = actualArray[24];\r",
              "        pm.test(testName, function () {\r",
              "            var expected = 15;\r",
              "            pm.collectionVariables.set(testName, expected + \"*\" + found);\r",
              "            pm.expect(found).is.length.greaterThan(expected);\r",
              "            pm.collectionVariables.set(testName, \"PASS\");\r",
              "        });\r",
              "        pm.collectionVariables.set(address_id[1], found);\r",
              "        console.log(\"ADDRESS_ID - \" + address_id[1] + \" is set as \" + found);\r",
              "    }\r",
              "\r",
              "    var testNameAid = \"Verify \" + mapKey + \" Address ID\";\r",
              "    (address_id[0] === \"Y\" ? pm.test.skip : pm.test)(testNameAid, () => {\r",
              "        var expected = String(pm.collectionVariables.get(address_id[0]));\r",
              "        var found = actualArray[24];\r",
              "        if (address_id[0] == '') {\r",
              "            pm.collectionVariables.set(testNameAid, \"Blank\" + \"*\" + found);\r",
              "            pm.expect(found).to.equal(\"\");\r",
              "        } else {\r",
              "            pm.collectionVariables.set(testNameAid, expected + \"*\" + found);\r",
              "            pm.expect(found).to.equal(expected);\r",
              "        }\r",
              "        pm.collectionVariables.set(testNameAid, \"PASS\");\r",
              "    });\r",
              "}\r",
              "\r",
              "pm.test(\"Verify record_count_processed\", function () {\r",
              "    var identifier = \"record_count_processed\";\r",
              "    var expected = 3;\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "pm.test(\"Verify record_count_error\", function () {\r",
              "    var identifier = \"record_count_error\";\r",
              "    var expected = 0;\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "var verifyList = _.keys(pm.collectionVariables.toObject());\r",
              "_.each(verifyList, (arrItem) => {\r",
              "    if (arrItem.includes(\"Verify\")) {\r",
              "        if (pm.collectionVariables.get(arrItem) != \"PASS\") {\r",
              "            var values = pm.collectionVariables.get(arrItem).split(\"*\");\r",
              "            console.log(\"===\" + arrItem + \"===\");\r",
              "            console.log(\"Expected : \" + values[0]);\r",
              "            console.log(\"Found    : \" + values[1]);\r",
              "            pm.collectionVariables.unset(arrItem);\r",
              "        }\r",
              "    }\r",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"Run_Flow\": {\n        \"Standard_Service_Elements\": {\n            \"Operation\": \"Run_Flow_Microbatch\"\n        },\n        \"Input\": {\n            \"partyID\": \"25469\",\n            \"delimiter\": \",\",\n            \"inquiryonly\": \"true\",\n            \"layout\": \"fname,mname,lname,suffix,gender,dob,addr1,addr2,city,state,zip,email,phone\",\n            \"rec1\": \"Jaimehyovmb,A,Rioshyovmb,,,,105 N 5th Street,APT 713,Barnsdall,OK,74002,,\",\n            \"rec2\": \",,,,,,,,,,,,(987) 696-9987\",\n            \"rec3\": \",,,,,,,,,,,email,\"\n        },\n        \"Flow\": {\n            \"Model_Options\": {\n                \"Return_Hygiene_Fields\": \"true\"\n            },\n            \"model\": \"hyov\"\n        }\n    }\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{URL}}/TreeFiddy/microbatch",
          "host": [
            "{{URL}}"
          ],
          "path": [
            "TreeFiddy",
            "microbatch"
          ]
        }
      },
      "response": []
    },
    {
      "name": "MB - Set 4",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "var value;\r",
              "if (pm.response.code == 200) {\r",
              "    value = JSON.parse(responseBody);\r",
              "}\r",
              "pm.test(\"Status code is 200\", function () {\r",
              "    pm.response.to.have.status(200);\r",
              "});\r",
              "\r",
              "pm.test('Verify Response headers', function () {\r",
              "    var identifier = \"csv_header\";\r",
              "    var expected = \"FlowControl_Return_Code,hy_z4fn,hy_errcode,hy_MatchLevel,hy_addr1,hy_addr2,hy_city,hy_state,hy_zip,hy_zip4,zip11,hy_pre_directional,hy_street_number,hy_street_name,hy_street_suffix,hy_post_directional,hy_unit,hy_unit_number,hy_dpc,hy_check_digit,hy_crrt,hy_urb,pinning_individual_id,pinning_household_id,pinning_address_id,pinning_matchReturnType,pinning_Return_Code\";\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "let recordMap = new Map([\r",
              "    [\"rec1\", \"FC000,1,0114,,,,,,,,,,,,,,,,,,,,Y.ID11,,Y.AID11,,N0000\"],\r",
              "    [\"rec2\", \"FC000,-1-07,07,,,,,,,,,,,,,,,,,,,,Y.ID12,,Y.AID12,,N0000\"],\r",
              "    [\"rec3\", \"FC000,-99,15,,,,,,,,,,,,,,,,,,,,ID5,HID5,AID5,CLIENT,VC000\"],\r",
              "    [\"rec4\", \"FC000,-99,57,,,,,,,,,,,,,,,,,,,,,,,,E0021\"],\r",
              "    [\"rec5\", \"FC000,-99,57,,,,,,,,,,,,,,,,,,,,,,,,E0018\"],\r",
              "    [\"rec6\", \"FC000,-99,57,,,,,,,,,,,,,,,,,,,,Y.ID11,,,,VG000\"]\r",
              "]);\r",
              "\r",
              "for (let [mapKey, mapValue] of recordMap) {\r",
              "    var actualArray = value[mapKey].split(',');\r",
              "    var expectedArray = mapValue.split(',');\r",
              "    var individual_id = expectedArray[22].split('.');\r",
              "    var household_id = expectedArray[23].split('.');\r",
              "    var address_id = expectedArray[24].split('.');\r",
              "\r",
              "    pm.test(\"Verify \" + mapKey + \" return code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" return code\", expectedArray[26] + \"*\" + actualArray[26]);\r",
              "        pm.expect(actualArray[26]).to.equal(expectedArray[26]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" return code\", \"PASS\");\r",
              "    });\r",
              "\r",
              "    pm.test(\"Verify \" + mapKey + \" match code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" match code\", expectedArray[25] + \"*\" + actualArray[25]);\r",
              "        pm.expect(actualArray[25]).to.equal(expectedArray[25]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" match code\", \"PASS\");\r",
              "    });\r",
              "\r",
              "    pm.test(\"Verify \" + mapKey + \" Z4FN code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" Z4FN code\", expectedArray[1] + \"*\" + actualArray[1]);\r",
              "        pm.expect(actualArray[1]).to.equal(expectedArray[1]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" Z4FN code\", \"PASS\");\r",
              "    });\r",
              "    pm.test(\"Verify \" + mapKey + \" ErrCode code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" ErrCode code\", expectedArray[2] + \"*\" + actualArray[2]);\r",
              "        pm.expect(actualArray[2]).to.equal(expectedArray[2]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" ErrCode code\", \"PASS\");\r",
              "    });\r",
              "\r",
              "\r",
              "    //Verifying IID length/value\r",
              "    if (individual_id[0] == \"Y\") {\r",
              "        var testName = \"Verify \" + mapKey + \" Individual ID length\";\r",
              "        var found = actualArray[22];\r",
              "        pm.test(testName, function () {\r",
              "            var expected = 15;\r",
              "            pm.collectionVariables.set(testName, expected + \"*\" + found);\r",
              "            pm.expect(found).is.length.greaterThan(expected);\r",
              "            pm.collectionVariables.set(testName, \"PASS\");\r",
              "        });\r",
              "        pm.collectionVariables.set(individual_id[1], found);\r",
              "        console.log(\"INDIVIDUAL_ID - \" + individual_id[1] + \" is set as \" + found);\r",
              "    }\r",
              "\r",
              "    var testNameInd = \"Verify \" + mapKey + \" Individual ID\";\r",
              "    (individual_id[0] === \"Y\" ? pm.test.skip : pm.test)(testNameInd, () => {\r",
              "        var expected = String(pm.collectionVariables.get(individual_id[0]));\r",
              "        var found = actualArray[22];\r",
              "        if (individual_id[0] == '') {\r",
              "            pm.collectionVariables.set(testNameInd, \"Blank\" + \"*\" + found);\r",
              "            pm.expect(found).to.equal(\"\");\r",
              "        } else {\r",
              "            pm.collectionVariables.set(testNameInd, expected + \"*\" + found);\r",
              "            pm.expect(found).to.equal(expected);\r",
              "        }\r",
              "        pm.collectionVariables.set(testNameInd, \"PASS\");\r",
              "    });\r",
              "\r",
              "    //Verifying HID length/value\r",
              "    if (household_id[0] == \"Y\") {\r",
              "        var testName = \"Verify \" + mapKey + \" Household ID length\";\r",
              "        var found = actualArray[23];\r",
              "        pm.test(testName, function () {\r",
              "            var expected = 15;\r",
              "            pm.collectionVariables.set(testName, expected + \"*\" + found);\r",
              "            pm.expect(found).is.length.greaterThan(expected);\r",
              "            pm.collectionVariables.set(testName, \"PASS\");\r",
              "        });\r",
              "        pm.collectionVariables.set(household_id[1], found);\r",
              "        console.log(\"HOUSEHOLD_ID - \" + household_id[1] + \" is set as \" + found);\r",
              "    }\r",
              "\r",
              "    var testNameHld = \"Verify \" + mapKey + \" Household ID\";\r",
              "    (household_id[0] === \"Y\" ? pm.test.skip : pm.test)(testNameHld, () => {\r",
              "        var expected = String(pm.collectionVariables.get(household_id[0]));\r",
              "        var found = actualArray[23];\r",
              "        if (household_id[0] == '') {\r",
              "            pm.collectionVariables.set(testNameHld, \"Blank\" + \"*\" + found);\r",
              "            pm.expect(found).to.equal(\"\");\r",
              "        } else {\r",
              "            pm.collectionVariables.set(testNameHld, expected + \"*\" + found);\r",
              "            pm.expect(found).to.equal(expected);\r",
              "        }\r",
              "        pm.collectionVariables.set(testNameHld, \"PASS\");\r",
              "    });\r",
              "\r",
              "    //Verifying AID length/value\r",
              "    if (address_id[0] == \"Y\") {\r",
              "        var testName = \"Verify \" + mapKey + \" Address ID length\";\r",
              "        var found = actualArray[24];\r",
              "        pm.test(testName, function () {\r",
              "            var expected = 15;\r",
              "            pm.collectionVariables.set(testName, expected + \"*\" + found);\r",
              "            pm.expect(found).is.length.greaterThan(expected);\r",
              "            pm.collectionVariables.set(testName, \"PASS\");\r",
              "        });\r",
              "        pm.collectionVariables.set(address_id[1], found);\r",
              "        console.log(\"ADDRESS_ID - \" + address_id[1] + \" is set as \" + found);\r",
              "    }\r",
              "\r",
              "    var testNameAid = \"Verify \" + mapKey + \" Address ID\";\r",
              "    (address_id[0] === \"Y\" ? pm.test.skip : pm.test)(testNameAid, () => {\r",
              "        var expected = String(pm.collectionVariables.get(address_id[0]));\r",
              "        var found = actualArray[24];\r",
              "        if (address_id[0] == '') {\r",
              "            pm.collectionVariables.set(testNameAid, \"Blank\" + \"*\" + found);\r",
              "            pm.expect(found).to.equal(\"\");\r",
              "        } else {\r",
              "            pm.collectionVariables.set(testNameAid, expected + \"*\" + found);\r",
              "            pm.expect(found).to.equal(expected);\r",
              "        }\r",
              "        pm.collectionVariables.set(testNameAid, \"PASS\");\r",
              "    });\r",
              "}\r",
              "\r",
              "pm.test(\"Verify record_count_processed\", function () {\r",
              "    var identifier = \"record_count_processed\";\r",
              "    var expected = 6;\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "pm.test(\"Verify record_count_error\", function () {\r",
              "    var identifier = \"record_count_error\";\r",
              "    var expected = 0;\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "var verifyList = _.keys(pm.collectionVariables.toObject());\r",
              "_.each(verifyList, (arrItem) => {\r",
              "    if (arrItem.includes(\"Verify\")) {\r",
              "        if (pm.collectionVariables.get(arrItem) != \"PASS\") {\r",
              "            var values = pm.collectionVariables.get(arrItem).split(\"*\");\r",
              "            console.log(\"===\" + arrItem + \"===\");\r",
              "            console.log(\"Expected : \" + values[0]);\r",
              "            console.log(\"Found    : \" + values[1]);\r",
              "            pm.collectionVariables.unset(arrItem);\r",
              "        }\r",
              "    }\r",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"Run_Flow\": {\n        \"Standard_Service_Elements\": {\n            \"Operation\": \"Run_Flow_Microbatch\"\n        },\n        \"Input\": {\n            \"partyID\": \"2813\",\n            \"delimiter\": \",\",\n            \"inquiryonly\": \"false\",\n            \"layout\": \"fname,mname,lname,suffix,gender,dob,addr1,addr2,city,state,zip,email,phone\",\n            \"rec1\": \",,,,,,6231 INDEPENDENCE DR,addr2,COLUMBUS,GA,31908,,(987) 696-9987\",\n            \"rec2\": \",,,,,,105 N 5th Street,APT 713,Barnsdall,OK,74002,,(987) 624-1987\",\n            \"rec3\": \"Thaliahyovmb,,Spencerhyovmb,,,,6533 River Loft Lane,Apt 1N,Charleston,WV,25320,,\",\n            \"rec4\": \"Joshuahyovmb,,Potterhyovmb,,,,,,,,,,0000000\",\n            \"rec5\": \",,,,,,,,,,,,\",\n            \"rec6\": \"Aubreyhyovmb,,Odonnellhyovmb,,,,,,,,,Aubrey987@email.com,(987) 696-9987\"\n        },\n        \"Flow\": {\n            \"Model_Options\": {\n                \"Return_Hygiene_Fields\": \"true\"\n            },\n            \"model\": \"hyov\"\n        }\n    }\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{URL}}/TreeFiddy/microbatch",
          "host": [
            "{{URL}}"
          ],
          "path": [
            "TreeFiddy",
            "microbatch"
          ]
        }
      },
      "response": []
    },
    {
      "name": "MB - Set 5",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "var value;\r",
              "if (pm.response.code == 200) {\r",
              "    value = JSON.parse(responseBody);\r",
              "}\r",
              "pm.test(\"Status code is 200\", function () {\r",
              "    pm.response.to.have.status(200);\r",
              "});\r",
              "\r",
              "pm.test('Verify Response headers', function () {\r",
              "    var identifier = \"csv_header\";\r",
              "    var expected = \"FlowControl_Return_Code,hy_z4fn,hy_errcode,hy_MatchLevel,hy_addr1,hy_addr2,hy_city,hy_state,hy_zip,hy_zip4,zip11,hy_pre_directional,hy_street_number,hy_street_name,hy_street_suffix,hy_post_directional,hy_unit,hy_unit_number,hy_dpc,hy_check_digit,hy_crrt,hy_urb,pinning_individual_id,pinning_household_id,pinning_address_id,pinning_matchReturnType,pinning_Return_Code\";\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "let recordMap = new Map([\r",
              "    [\"rec1\", \"FC000,-99,,,,,,,,,,,,,,,,,,,,,ID11,,,CLIENT,VC000\"],\r",
              "    [\"rec2\", \"FC000,-99,,,,,,,,,,,,,,,,,,,,,,,Y.AID12,,E9999\"]\r",
              "]);\r",
              "\r",
              "for (let [mapKey, mapValue] of recordMap) {\r",
              "    var actualArray = value[mapKey].split(',');\r",
              "    var expectedArray = mapValue.split(',');\r",
              "    var individual_id = expectedArray[22].split('.');\r",
              "    var household_id = expectedArray[23].split('.');\r",
              "    var address_id = expectedArray[24].split('.');\r",
              "\r",
              "    pm.test(\"Verify \" + mapKey + \" return code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" return code\", expectedArray[26] + \"*\" + actualArray[26]);\r",
              "        pm.expect(actualArray[26]).to.equal(expectedArray[26]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" return code\", \"PASS\");\r",
              "    });\r",
              "\r",
              "    pm.test(\"Verify \" + mapKey + \" match code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" match code\", expectedArray[25] + \"*\" + actualArray[25]);\r",
              "        pm.expect(actualArray[25]).to.equal(expectedArray[25]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" match code\", \"PASS\");\r",
              "    });\r",
              "\r",
              "    pm.test(\"Verify \" + mapKey + \" Z4FN code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" Z4FN code\", expectedArray[1] + \"*\" + actualArray[1]);\r",
              "        pm.expect(actualArray[1]).to.equal(expectedArray[1]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" Z4FN code\", \"PASS\");\r",
              "    });\r",
              "    pm.test(\"Verify \" + mapKey + \" ErrCode code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" ErrCode code\", expectedArray[2] + \"*\" + actualArray[2]);\r",
              "        pm.expect(actualArray[2]).to.equal(expectedArray[2]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" ErrCode code\", \"PASS\");\r",
              "    });\r",
              "\r",
              "\r",
              "    //Verifying IID length/value\r",
              "    if (individual_id[0] == \"Y\") {\r",
              "        var testName = \"Verify \" + mapKey + \" Individual ID length\";\r",
              "        var found = actualArray[22];\r",
              "        pm.test(testName, function () {\r",
              "            var expected = 15;\r",
              "            pm.collectionVariables.set(testName, expected + \"*\" + found);\r",
              "            pm.expect(found).is.length.greaterThan(expected);\r",
              "            pm.collectionVariables.set(testName, \"PASS\");\r",
              "        });\r",
              "        pm.collectionVariables.set(individual_id[1], found);\r",
              "        console.log(\"INDIVIDUAL_ID - \" + individual_id[1] + \" is set as \" + found);\r",
              "    }\r",
              "\r",
              "    var testNameInd = \"Verify \" + mapKey + \" Individual ID\";\r",
              "    (individual_id[0] === \"Y\" ? pm.test.skip : pm.test)(testNameInd, () => {\r",
              "        var expected = String(pm.collectionVariables.get(individual_id[0]));\r",
              "        var found = actualArray[22];\r",
              "        if (individual_id[0] == '') {\r",
              "            pm.collectionVariables.set(testNameInd, \"Blank\" + \"*\" + found);\r",
              "            pm.expect(found).to.equal(\"\");\r",
              "        } else {\r",
              "            pm.collectionVariables.set(testNameInd, expected + \"*\" + found);\r",
              "            pm.expect(found).to.equal(expected);\r",
              "        }\r",
              "        pm.collectionVariables.set(testNameInd, \"PASS\");\r",
              "    });\r",
              "\r",
              "    //Verifying HID length/value\r",
              "    if (household_id[0] == \"Y\") {\r",
              "        var testName = \"Verify \" + mapKey + \" Household ID length\";\r",
              "        var found = actualArray[23];\r",
              "        pm.test(testName, function () {\r",
              "            var expected = 15;\r",
              "            pm.collectionVariables.set(testName, expected + \"*\" + found);\r",
              "            pm.expect(found).is.length.greaterThan(expected);\r",
              "            pm.collectionVariables.set(testName, \"PASS\");\r",
              "        });\r",
              "        pm.collectionVariables.set(household_id[1], found);\r",
              "        console.log(\"HOUSEHOLD_ID - \" + household_id[1] + \" is set as \" + found);\r",
              "    }\r",
              "\r",
              "    var testNameHld = \"Verify \" + mapKey + \" Household ID\";\r",
              "    (household_id[0] === \"Y\" ? pm.test.skip : pm.test)(testNameHld, () => {\r",
              "        var expected = String(pm.collectionVariables.get(household_id[0]));\r",
              "        var found = actualArray[23];\r",
              "        if (household_id[0] == '') {\r",
              "            pm.collectionVariables.set(testNameHld, \"Blank\" + \"*\" + found);\r",
              "            pm.expect(found).to.equal(\"\");\r",
              "        } else {\r",
              "            pm.collectionVariables.set(testNameHld, expected + \"*\" + found);\r",
              "            pm.expect(found).to.equal(expected);\r",
              "        }\r",
              "        pm.collectionVariables.set(testNameHld, \"PASS\");\r",
              "    });\r",
              "\r",
              "    //Verifying AID length/value\r",
              "    if (address_id[0] == \"Y\") {\r",
              "        var testName = \"Verify \" + mapKey + \" Address ID length\";\r",
              "        var found = actualArray[24];\r",
              "        pm.test(testName, function () {\r",
              "            var expected = 15;\r",
              "            pm.collectionVariables.set(testName, expected + \"*\" + found);\r",
              "            pm.expect(found).is.length.greaterThan(expected);\r",
              "            pm.collectionVariables.set(testName, \"PASS\");\r",
              "        });\r",
              "        pm.collectionVariables.set(address_id[1], found);\r",
              "        console.log(\"ADDRESS_ID - \" + address_id[1] + \" is set as \" + found);\r",
              "    }\r",
              "\r",
              "    var testNameAid = \"Verify \" + mapKey + \" Address ID\";\r",
              "    (address_id[0] === \"Y\" ? pm.test.skip : pm.test)(testNameAid, () => {\r",
              "        var expected = String(pm.collectionVariables.get(address_id[0]));\r",
              "        var found = actualArray[24];\r",
              "        if (address_id[0] == '') {\r",
              "            pm.collectionVariables.set(testNameAid, \"Blank\" + \"*\" + found);\r",
              "            pm.expect(found).to.equal(\"\");\r",
              "        } else {\r",
              "            pm.collectionVariables.set(testNameAid, expected + \"*\" + found);\r",
              "            pm.expect(found).to.equal(expected);\r",
              "        }\r",
              "        pm.collectionVariables.set(testNameAid, \"PASS\");\r",
              "    });\r",
              "}\r",
              "\r",
              "pm.test(\"Verify record_count_processed\", function () {\r",
              "    var identifier = \"record_count_processed\";\r",
              "    var expected = 2;\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "pm.test(\"Verify record_count_error\", function () {\r",
              "    var identifier = \"record_count_error\";\r",
              "    var expected = 0;\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "var verifyList = _.keys(pm.collectionVariables.toObject());\r",
              "_.each(verifyList, (arrItem) => {\r",
              "    if (arrItem.includes(\"Verify\")) {\r",
              "        if (pm.collectionVariables.get(arrItem) != \"PASS\") {\r",
              "            var values = pm.collectionVariables.get(arrItem).split(\"*\");\r",
              "            console.log(\"===\" + arrItem + \"===\");\r",
              "            console.log(\"Expected : \" + values[0]);\r",
              "            console.log(\"Found    : \" + values[1]);\r",
              "            pm.collectionVariables.unset(arrItem);\r",
              "        }\r",
              "    }\r",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"Run_Flow\": {\n        \"Standard_Service_Elements\": {\n            \"Operation\": \"Run_Flow_Microbatch\"\n        },\n        \"Input\": {\n            \"partyID\": \"2813\",\n            \"delimiter\": \",\",\n            \"inquiryonly\": \"true\",\n            \"layout\": \"fname,mname,lname,suffix,gender,dob,addr1,addr2,city,state,zip,email,phone\",\n            \"rec1\": \"Aubreyhyovmb,,Odonnellhyovmb,,,,105 N 5th St,,,,,,(987) 696-9987\",\n            \"rec2\": \"Dontehyovmb,,Ericksonhyovmb,,,,6070 Potawatomie Place,,Dayton,IA,50530,,\"\n        },\n        \"Flow\": {\n            \"Model_Options\": {\n                \"Return_Hygiene_Fields\": \"true\"\n            },\n            \"model\": \"hyov\"\n        }\n    }\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{URL}}/TreeFiddy/microbatch",
          "host": [
            "{{URL}}"
          ],
          "path": [
            "TreeFiddy",
            "microbatch"
          ]
        }
      },
      "response": []
    },
    {
      "name": "MB - Set 6",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "var value;\r",
              "if (pm.response.code == 200){\r",
              "    value = JSON.parse(responseBody);\r",
              "}\r",
              "pm.test(\"Status code is 200\", function () {\r",
              "    pm.response.to.have.status(200);\r",
              "});\r",
              "\r",
              "pm.test('Verify Response headers', function () {\r",
              "    var identifier = \"csv_header\";\r",
              "    var expected = \"FlowControl_Return_Code,hy_z4fn,hy_errcode,hy_MatchLevel,hy_addr1,hy_addr2,hy_city,hy_state,hy_zip,hy_zip4,zip11,hy_pre_directional,hy_street_number,hy_street_name,hy_street_suffix,hy_post_directional,hy_unit,hy_unit_number,hy_dpc,hy_check_digit,hy_crrt,hy_urb,pinning_individual_id,pinning_household_id,pinning_address_id,pinning_matchReturnType,pinning_Return_Code\";\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "pm.test('Verify Invalid record', function () {\r",
              "    var identifier = \"rec1\";\r",
              "    var expected = \"ERROR - E0022{The input record's layout does not match the one specified on the request message (has either more or less fields / characters).}\";\r",
              "    pm.collectionVariables.set('Verify Invalid record', expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set('Verify Invalid record', \"PASS\");\r",
              "});\r",
              ""
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"Run_Flow\": {\n        \"Standard_Service_Elements\": {\n            \"Operation\": \"Run_Flow_Microbatch\"\n        },\n        \"Input\": {\n            \"partyID\": \"25469\",\n            \"delimiter\": \",\",\n            \"inquiryonly\": \"false\",\n            \"layout\": \"fname,mname,lname,suffix,gender,dob,addr1,addr2,city,state,zip,email,phone\",\n            \"rec1\": \"Davidhyovmb,,Harrellhyovmb,,,,,,,,,,,,,\"\n        },\n        \"Flow\": {\n            \"Model_Options\": {\n                \"Return_Hygiene_Fields\": \"true\"\n            },\n            \"model\": \"hyov\"\n        }\n    }\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{URL}}/TreeFiddy/microbatch",
          "host": [
            "{{URL}}"
          ],
          "path": [
            "TreeFiddy",
            "microbatch"
          ]
        }
      },
      "response": []
    },
    {
      "name": "MB - Set 7",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "var value;\r",
              "if (pm.response.code == 200) {\r",
              "    value = JSON.parse(responseBody);\r",
              "}\r",
              "pm.test(\"Status code is 200\", function () {\r",
              "    pm.response.to.have.status(200);\r",
              "});\r",
              "\r",
              "pm.test('Verify Response headers', function () {\r",
              "    var identifier = \"csv_header\";\r",
              "    var expected = \"fname,mname,lname,suffix,gender,dob,addr1,addr2,city,state,zip,email,phone,FlowControl_Return_Code,pinning_individual_id,pinning_household_id,pinning_address_id,pinning_matchReturnType,pinning_Return_Code\";\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "let recordMap = new Map([\r",
              "    [\"rec1\", \"FC000,Y.ID12,Y.HID12,Y.AID12,,VG000,Alexandriahyovmb\"],\r",
              "    [\"rec2\", \"FC000,ID12,,,CLIENT,VC000,Alexandriahyovmb\"],\r",
              "    [\"rec3\", \"FC000,,,,,E0018,Adriannahyovmb\"],\r",
              "    [\"rec4\", \"FC000,Y.ID15,Y.HID15,Y.AID15,,VG000,Jovanhyovmb\"]\r",
              "]);\r",
              "\r",
              "for (let [mapKey, mapValue] of recordMap) {\r",
              "    var actualArray = value[mapKey].split(',');\r",
              "    var expectedArray = mapValue.split(',');\r",
              "    var individual_id = expectedArray[1].split('.');\r",
              "    var household_id = expectedArray[2].split('.');\r",
              "    var address_id = expectedArray[3].split('.');\r",
              "\r",
              "    pm.test(\"Verify \" + mapKey + \" return code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" return code\", expectedArray[5] + \"*\" + actualArray[5]);\r",
              "        pm.expect(actualArray[18]).to.equal(expectedArray[5]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" return code\", \"PASS\");\r",
              "    });\r",
              "\r",
              "    pm.test(\"Verify \" + mapKey + \" match code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" match code\", expectedArray[4] + \"*\" + actualArray[4]);\r",
              "        pm.expect(actualArray[17]).to.equal(expectedArray[4]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" match code\", \"PASS\");\r",
              "    });\r",
              "\r",
              "    pm.test(\"Verify \" + mapKey + \" fname\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" fname\", expectedArray[6] + \"*\" + actualArray[0]);\r",
              "        pm.expect(actualArray[0]).to.equal(expectedArray[6]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" fname\", \"PASS\");\r",
              "    });\r",
              "\r",
              "    //Verifying IID length/value\r",
              "    if (individual_id[0] == \"Y\") {\r",
              "        var testName = \"Verify \" + mapKey + \" Individual ID length\";\r",
              "        var found = actualArray[14];\r",
              "        pm.test(testName, function () {\r",
              "            var expected = 15;\r",
              "            pm.collectionVariables.set(testName, expected + \"*\" + found);\r",
              "            pm.expect(found).is.length.greaterThan(expected);\r",
              "            pm.collectionVariables.set(testName, \"PASS\");\r",
              "        });\r",
              "        pm.collectionVariables.set(individual_id[1], found);\r",
              "        console.log(\"INDIVIDUAL_ID - \" + individual_id[1] + \" is set as \" + found);\r",
              "    }\r",
              "\r",
              "    var testNameInd = \"Verify \" + mapKey + \" Individual ID\";\r",
              "    (individual_id[0] === \"Y\" ? pm.test.skip : pm.test)(testNameInd, () => {\r",
              "        var expected = String(pm.collectionVariables.get(individual_id[0]));\r",
              "        var found = actualArray[14];\r",
              "        if (individual_id[0] == '') {\r",
              "            pm.collectionVariables.set(testNameInd, \"Blank\" + \"*\" + found);\r",
              "            pm.expect(found).to.equal(\"\");\r",
              "        } else {\r",
              "            pm.collectionVariables.set(testNameInd, expected + \"*\" + found);\r",
              "            pm.expect(found).to.equal(expected);\r",
              "        }\r",
              "        pm.collectionVariables.set(testNameInd, \"PASS\");\r",
              "    });\r",
              "\r",
              "    //Verifying HID length/value\r",
              "    if (household_id[0] == \"Y\") {\r",
              "        var testName = \"Verify \" + mapKey + \" Household ID length\";\r",
              "        var found = actualArray[15];\r",
              "        pm.test(testName, function () {\r",
              "            var expected = 15;\r",
              "            pm.collectionVariables.set(testName, expected + \"*\" + found);\r",
              "            pm.expect(found).is.length.greaterThan(expected);\r",
              "            pm.collectionVariables.set(testName, \"PASS\");\r",
              "        });\r",
              "        pm.collectionVariables.set(household_id[1], found);\r",
              "        console.log(\"HOUSEHOLD_ID - \" + household_id[1] + \" is set as \" + found);\r",
              "    }\r",
              "\r",
              "    var testNameHld = \"Verify \" + mapKey + \" Household ID\";\r",
              "    (household_id[0] === \"Y\" ? pm.test.skip : pm.test)(testNameHld, () => {\r",
              "        var expected = String(pm.collectionVariables.get(household_id[0]));\r",
              "        var found = actualArray[15];\r",
              "        if (household_id[0] == '') {\r",
              "            pm.collectionVariables.set(testNameHld, \"Blank\" + \"*\" + found);\r",
              "            pm.expect(found).to.equal(\"\");\r",
              "        } else {\r",
              "            pm.collectionVariables.set(testNameHld, expected + \"*\" + found);\r",
              "            pm.expect(found).to.equal(expected);\r",
              "        }\r",
              "        pm.collectionVariables.set(testNameHld, \"PASS\");\r",
              "    });\r",
              "\r",
              "    //Verifying AID length/value\r",
              "    if (address_id[0] == \"Y\") {\r",
              "        var testName = \"Verify \" + mapKey + \" Address ID length\";\r",
              "        var found = actualArray[16];\r",
              "        pm.test(testName, function () {\r",
              "            var expected = 15;\r",
              "            pm.collectionVariables.set(testName, expected + \"*\" + found);\r",
              "            pm.expect(found).is.length.greaterThan(expected);\r",
              "            pm.collectionVariables.set(testName, \"PASS\");\r",
              "        });\r",
              "        pm.collectionVariables.set(address_id[1], found);\r",
              "        console.log(\"ADDRESS_ID - \" + address_id[1] + \" is set as \" + found);\r",
              "    }\r",
              "\r",
              "    var testNameAid = \"Verify \" + mapKey + \" Address ID\";\r",
              "    (address_id[0] === \"Y\" ? pm.test.skip : pm.test)(testNameAid, () => {\r",
              "        var expected = String(pm.collectionVariables.get(address_id[0]));\r",
              "        var found = actualArray[16];\r",
              "        if (address_id[0] == '') {\r",
              "            pm.collectionVariables.set(testNameAid, \"Blank\" + \"*\" + found);\r",
              "            pm.expect(found).to.equal(\"\");\r",
              "        } else {\r",
              "            pm.collectionVariables.set(testNameAid, expected + \"*\" + found);\r",
              "            pm.expect(found).to.equal(expected);\r",
              "        }\r",
              "        pm.collectionVariables.set(testNameAid, \"PASS\");\r",
              "    });\r",
              "}\r",
              "\r",
              "pm.test(\"Verify record_count_processed\", function () {\r",
              "    var identifier = \"record_count_processed\";\r",
              "    var expected = 4;\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "pm.test(\"Verify record_count_error\", function () {\r",
              "    var identifier = \"record_count_error\";\r",
              "    var expected = 0;\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "var verifyList = _.keys(pm.collectionVariables.toObject());\r",
              "_.each(verifyList, (arrItem) => {\r",
              "    if (arrItem.includes(\"Verify\")) {\r",
              "        if (pm.collectionVariables.get(arrItem) != \"PASS\") {\r",
              "            var values = pm.collectionVariables.get(arrItem).split(\"*\");\r",
              "            console.log(\"===\" + arrItem + \"===\");\r",
              "            console.log(\"Expected : \" + values[0]);\r",
              "            console.log(\"Found    : \" + values[1]);\r",
              "            pm.collectionVariables.unset(arrItem);\r",
              "        }\r",
              "    }\r",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"Run_Flow\": {\n        \"Standard_Service_Elements\": {\n            \"Operation\": \"Run_Flow_Microbatch\"\n        },\n        \"Input\": {\n            \"partyID\": \"2813\",\n            \"delimiter\": \",\",\n            \"inquiryonly\": \"false\",\n            \"layout\": \"fname,mname,lname,suffix,gender,dob,addr1,addr2,city,state,zip,email,phone\",\n            \"rec1\": \"Alexandriahyovmb,,HuffFhyovmb,,Male,,105 N 5th Street,APT 713,Barnsdall,OK,74002,Alexandria987@email.com,(987) 364-3489\",\n            \"rec2\": \"Alexandriahyovmb,,HuffFhyovmb,,,,,,,,,Alexandria987@email.com,\",\n            \"rec3\": \"Adriannahyovmb,,Frosthyovmb,,,,,,,,,,\",\n            \"rec4\": \"Jovanhyovmb,,Estradahyovmb,,,,2548 W Desert Inn Rd suite 100 las vegas NV 89109,,,,,,\"\n        },\n        \"Flow\": {\n            \"Flow_Options\": {\n                \"CarryInput\": \"true\"\n            },\n            \"Model_Options\": {\n                \"Return_Hygiene_Fields\": \"false\"\n            },\n            \"model\": \"hyov\"\n        }\n    }\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{URL}}/TreeFiddy/microbatch",
          "host": [
            "{{URL}}"
          ],
          "path": [
            "TreeFiddy",
            "microbatch"
          ]
        }
      },
      "response": []
    },
    {
      "name": "MB - Set 8",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "var value;\r",
              "if (pm.response.code == 200) {\r",
              "    value = JSON.parse(responseBody);\r",
              "}\r",
              "pm.test(\"Status code is 200\", function () {\r",
              "    pm.response.to.have.status(200);\r",
              "});\r",
              "\r",
              "pm.test('Verify Response headers', function () {\r",
              "    var identifier = \"csv_header\";\r",
              "    var expected = \"FlowControl_Return_Code,hy_z4fn,hy_errcode,hy_MatchLevel,hy_addr1,hy_addr2,hy_city,hy_state,hy_zip,hy_zip4,zip11,hy_crrt,hy_street_number,pinning_individual_id,pinning_household_id,pinning_address_id,pinning_matchReturnType,pinning_Return_Code\";\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "let recordMap = new Map([\r",
              "    [\"rec1\", \"FC000,-99,,1,105 N 5TH ST APT 713,,BARNSDALL,OK,74002,,,R001,105,Y.ID16,Y.HID16,Y.AID16,,VG000\"],\r",
              "    [\"rec2\", \"FC000,-99,57,0,,,,,,,,,,ID16,HID16,Y.AID17,EXPERIAN,VE000\"],\r",
              "    [\"rec3\", \"FC000,-99,57,0,,,,,,,,,,Y.ID18,Y.HID18,Y.AID18,,E0018\"],\r",
              "    [\"rec4\", \"FC000,1,,1,2548 W DESERT INN RD STE 100,,LAS VEGAS,NV,89109,1018,89109101825,C039,2548,Y.ID19,Y.HID19,Y.AID19,,VG000\"]\r",
              "]);\r",
              "\r",
              "for (let [mapKey, mapValue] of recordMap) {\r",
              "    var actualArray = value[mapKey].split(',');\r",
              "    var expectedArray = mapValue.split(',');\r",
              "    var individual_id = expectedArray[13].split('.');\r",
              "    var household_id = expectedArray[14].split('.');\r",
              "    var address_id = expectedArray[15].split('.');\r",
              "\r",
              "    pm.test(\"Verify \" + mapKey + \" return code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" return code\", expectedArray[17] + \"*\" + actualArray[17]);\r",
              "        pm.expect(actualArray[17]).to.equal(expectedArray[17]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" return code\", \"PASS\");\r",
              "    });\r",
              "\r",
              "    pm.test(\"Verify \" + mapKey + \" match code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" match code\", expectedArray[16] + \"*\" + actualArray[16]);\r",
              "        pm.expect(actualArray[16]).to.equal(expectedArray[16]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" match code\", \"PASS\");\r",
              "    });\r",
              "\r",
              "    pm.test(\"Verify \" + mapKey + \" Z4FN code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" Z4FN code\", expectedArray[1] + \"*\" + actualArray[1]);\r",
              "        pm.expect(actualArray[1]).to.equal(expectedArray[1]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" Z4FN code\", \"PASS\");\r",
              "    });\r",
              "    pm.test(\"Verify \" + mapKey + \" ErrCode code\", function () {\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" ErrCode code\", expectedArray[2] + \"*\" + actualArray[2]);\r",
              "        pm.expect(actualArray[2]).to.equal(expectedArray[2]);\r",
              "        pm.collectionVariables.set(\"Verify \" + mapKey + \" ErrCode code\", \"PASS\");\r",
              "    });\r",
              "\r",
              "\r",
              "    //Verifying IID length/value\r",
              "    if (individual_id[0] == \"Y\") {\r",
              "        var testName = \"Verify \" + mapKey + \" Individual ID length\";\r",
              "        var found = actualArray[13];\r",
              "        pm.test(testName, function () {\r",
              "            var expected = 15;\r",
              "            pm.collectionVariables.set(testName, expected + \"*\" + found);\r",
              "            pm.expect(found).is.length.greaterThan(expected);\r",
              "            pm.collectionVariables.set(testName, \"PASS\");\r",
              "        });\r",
              "        pm.collectionVariables.set(individual_id[1], found);\r",
              "        console.log(\"INDIVIDUAL_ID - \" + individual_id[1] + \" is set as \" + found);\r",
              "    }\r",
              "\r",
              "    var testNameInd = \"Verify \" + mapKey + \" Individual ID\";\r",
              "    (individual_id[0] === \"Y\" ? pm.test.skip : pm.test)(testNameInd, () => {\r",
              "        var expected = String(pm.collectionVariables.get(individual_id[0]));\r",
              "        var found = actualArray[13];\r",
              "        if (individual_id[0] == '') {\r",
              "            pm.collectionVariables.set(testNameInd, \"Blank\" + \"*\" + found);\r",
              "            pm.expect(found).to.equal(\"\");\r",
              "        } else {\r",
              "            pm.collectionVariables.set(testNameInd, expected + \"*\" + found);\r",
              "            pm.expect(found).to.equal(expected);\r",
              "        }\r",
              "        pm.collectionVariables.set(testNameInd, \"PASS\");\r",
              "    });\r",
              "\r",
              "    //Verifying HID length/value\r",
              "    if (household_id[0] == \"Y\") {\r",
              "        var testName = \"Verify \" + mapKey + \" Household ID length\";\r",
              "        var found = actualArray[14];\r",
              "        pm.test(testName, function () {\r",
              "            var expected = 15;\r",
              "            pm.collectionVariables.set(testName, expected + \"*\" + found);\r",
              "            pm.expect(found).is.length.greaterThan(expected);\r",
              "            pm.collectionVariables.set(testName, \"PASS\");\r",
              "        });\r",
              "        pm.collectionVariables.set(household_id[1], found);\r",
              "        console.log(\"HOUSEHOLD_ID - \" + household_id[1] + \" is set as \" + found);\r",
              "    }\r",
              "\r",
              "    var testNameHld = \"Verify \" + mapKey + \" Household ID\";\r",
              "    (household_id[0] === \"Y\" ? pm.test.skip : pm.test)(testNameHld, () => {\r",
              "        var expected = String(pm.collectionVariables.get(household_id[0]));\r",
              "        var found = actualArray[14];\r",
              "        if (household_id[0] == '') {\r",
              "            pm.collectionVariables.set(testNameHld, \"Blank\" + \"*\" + found);\r",
              "            pm.expect(found).to.equal(\"\");\r",
              "        } else {\r",
              "            pm.collectionVariables.set(testNameHld, expected + \"*\" + found);\r",
              "            pm.expect(found).to.equal(expected);\r",
              "        }\r",
              "        pm.collectionVariables.set(testNameHld, \"PASS\");\r",
              "    });\r",
              "\r",
              "    //Verifying AID length/value\r",
              "    if (address_id[0] == \"Y\") {\r",
              "        var testName = \"Verify \" + mapKey + \" Address ID length\";\r",
              "        var found = actualArray[15];\r",
              "        pm.test(testName, function () {\r",
              "            var expected = 15;\r",
              "            pm.collectionVariables.set(testName, expected + \"*\" + found);\r",
              "            pm.expect(found).is.length.greaterThan(expected);\r",
              "            pm.collectionVariables.set(testName, \"PASS\");\r",
              "        });\r",
              "        pm.collectionVariables.set(address_id[1], found);\r",
              "        console.log(\"ADDRESS_ID - \" + address_id[1] + \" is set as \" + found);\r",
              "    }\r",
              "\r",
              "    var testNameAid = \"Verify \" + mapKey + \" Address ID\";\r",
              "    (address_id[0] === \"Y\" ? pm.test.skip : pm.test)(testNameAid, () => {\r",
              "        var expected = String(pm.collectionVariables.get(address_id[0]));\r",
              "        var found = actualArray[15];\r",
              "        if (address_id[0] == '') {\r",
              "            pm.collectionVariables.set(testNameAid, \"Blank\" + \"*\" + found);\r",
              "            pm.expect(found).to.equal(\"\");\r",
              "        } else {\r",
              "            pm.collectionVariables.set(testNameAid, expected + \"*\" + found);\r",
              "            pm.expect(found).to.equal(expected);\r",
              "        }\r",
              "        pm.collectionVariables.set(testNameAid, \"PASS\");\r",
              "    });\r",
              "}\r",
              "\r",
              "pm.test(\"Verify record_count_processed\", function () {\r",
              "    var identifier = \"record_count_processed\";\r",
              "    var expected = 4;\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "pm.test(\"Verify record_count_error\", function () {\r",
              "    var identifier = \"record_count_error\";\r",
              "    var expected = 0;\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, expected + \"*\" + value[identifier]);\r",
              "    pm.expect(value[identifier]).to.equal(expected);\r",
              "    pm.collectionVariables.set(\"Verify \" + identifier, \"PASS\");\r",
              "});\r",
              "\r",
              "var verifyList = _.keys(pm.collectionVariables.toObject());\r",
              "_.each(verifyList, (arrItem) => {\r",
              "    if (arrItem.includes(\"Verify\")) {\r",
              "        if (pm.collectionVariables.get(arrItem) != \"PASS\") {\r",
              "            var values = pm.collectionVariables.get(arrItem).split(\"*\");\r",
              "            console.log(\"===\" + arrItem + \"===\");\r",
              "            console.log(\"Expected : \" + values[0]);\r",
              "            console.log(\"Found    : \" + values[1]);\r",
              "            pm.collectionVariables.unset(arrItem);\r",
              "        }\r",
              "    }\r",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"Run_Flow\": {\n        \"Standard_Service_Elements\": {\n            \"Operation\": \"Run_Flow_Microbatch\"\n        },\n        \"Input\": {\n            \"partyID\": \"25469\",\n            \"delimiter\": \",\",\n            \"inquiryonly\": \"false\",\n            \"layout\": \"fname,mname,lname,suffix,gender,dob,addr1,addr2,city,state,zip,email,phone\",\n            \"rec1\": \"Katrinahyovmb,,Franklinhyovmb,,Male,,7153 Van Schaik Boulevard,APT 713,Martell,NE,68404,Franklinhyovmb@email.com,(987) 123-3489\",\n            \"rec2\": \"Katrinahyovmb,,Franklinhyovmb,,,,,,,,,Franklinhyovmb@email.com,\",\n            \"rec3\": \"Katrinahyovmb,,Franklinhyovmb,,,,,,,,,,\",\n            \"rec4\": \"Ariellehyovmb,,Glennhyovmb,,,,2548 W Desert Inn Rd suite 100 las vegas NV 89109,,,,,,\"\n        },\n        \"Flow\": {\n            \"Model_Options\": {\n                \"Return_Hygiene_Fields\": \"true\",\n                \"hygiene_return_field_list\": \"hy_crrt,hy_street_number\"\n            },\n            \"model\": \"hyov\"\n        }\n    }\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{URL}}/TreeFiddy/microbatch",
          "host": [
            "{{URL}}"
          ],
          "path": [
            "TreeFiddy",
            "microbatch"
          ]
        }
      },
      "response": []
    }
  ],
  "variable": [
    {
      "key": "Verify csv_header",
      "value": ""
    },
    {
      "key": "Verify rec1 Z4FN code",
      "value": ""
    },
    {
      "key": "Verify rec1 ErrCode code",
      "value": ""
    },
    {
      "key": "Verify rec1 Individual ID length",
      "value": ""
    },
    {
      "key": "ID1",
      "value": ""
    },
    {
      "key": "Verify rec1 Household ID length",
      "value": ""
    },
    {
      "key": "HID1",
      "value": ""
    },
    {
      "key": "Verify rec1 Address ID length",
      "value": ""
    },
    {
      "key": "AID1",
      "value": ""
    },
    {
      "key": "Verify rec2 Z4FN code",
      "value": ""
    },
    {
      "key": "Verify rec2 ErrCode code",
      "value": ""
    },
    {
      "key": "Verify rec2 Individual ID length",
      "value": ""
    },
    {
      "key": "ID2",
      "value": ""
    },
    {
      "key": "Verify rec2 Household ID length",
      "value": ""
    },
    {
      "key": "HID2",
      "value": ""
    },
    {
      "key": "Verify rec2 Address ID length",
      "value": ""
    },
    {
      "key": "AID2",
      "value": ""
    },
    {
      "key": "Verify rec3 return code",
      "value": ""
    },
    {
      "key": "Verify rec3 match code",
      "value": ""
    },
    {
      "key": "Verify rec3 Z4FN code",
      "value": ""
    },
    {
      "key": "Verify rec3 ErrCode code",
      "value": ""
    },
    {
      "key": "Verify rec3 Individual ID length",
      "value": ""
    },
    {
      "key": "ID3",
      "value": ""
    },
    {
      "key": "Verify rec3 Household ID length",
      "value": ""
    },
    {
      "key": "HID3",
      "value": ""
    },
    {
      "key": "Verify rec3 Address ID length",
      "value": ""
    },
    {
      "key": "AID3",
      "value": ""
    },
    {
      "key": "Verify rec4 Z4FN code",
      "value": ""
    },
    {
      "key": "Verify rec4 ErrCode code",
      "value": ""
    },
    {
      "key": "Verify rec4 Individual ID length",
      "value": ""
    },
    {
      "key": "ID4",
      "value": ""
    },
    {
      "key": "Verify rec4 Household ID length",
      "value": ""
    },
    {
      "key": "HID4",
      "value": ""
    },
    {
      "key": "Verify rec4 Address ID length",
      "value": ""
    },
    {
      "key": "AID4",
      "value": ""
    },
    {
      "key": "Verify record_count_processed",
      "value": ""
    },
    {
      "key": "Verify record_count_error",
      "value": ""
    },
    {
      "key": "ID5",
      "value": ""
    },
    {
      "key": "HID5",
      "value": ""
    },
    {
      "key": "AID5",
      "value": ""
    },
    {
      "key": "ID6",
      "value": ""
    },
    {
      "key": "Verify rec2 Household ID",
      "value": ""
    },
    {
      "key": "Verify rec2 Address ID",
      "value": ""
    },
    {
      "key": "Verify rec3 Individual ID",
      "value": ""
    },
    {
      "key": "Verify rec3 Household ID",
      "value": ""
    },
    {
      "key": "AID7",
      "value": ""
    },
    {
      "key": "Verify rec4 Individual ID",
      "value": ""
    },
    {
      "key": "Verify rec4 Household ID",
      "value": ""
    },
    {
      "key": "AID8",
      "value": ""
    },
    {
      "key": "Verify rec1 Individual ID",
      "value": ""
    },
    {
      "key": "Verify rec1 Household ID",
      "value": ""
    },
    {
      "key": "Verify rec1 Address ID",
      "value": ""
    },
    {
      "key": "Verify rec2 return code",
      "value": ""
    },
    {
      "key": "Verify rec2 match code",
      "value": ""
    },
    {
      "key": "ID10",
      "value": ""
    },
    {
      "key": "AID10",
      "value": ""
    },
    {
      "key": "ID11",
      "value": ""
    },
    {
      "key": "HID11",
      "value": ""
    },
    {
      "key": "AID11",
      "value": ""
    },
    {
      "key": "ID12",
      "value": ""
    },
    {
      "key": "AID12",
      "value": ""
    },
    {
      "key": "Verify rec3 Address ID",
      "value": ""
    },
    {
      "key": "Verify rec4 Address ID",
      "value": ""
    },
    {
      "key": "Verify rec5 return code",
      "value": ""
    },
    {
      "key": "Verify rec5 match code",
      "value": ""
    },
    {
      "key": "Verify rec5 Z4FN code",
      "value": ""
    },
    {
      "key": "Verify rec5 ErrCode code",
      "value": ""
    },
    {
      "key": "Verify rec5 Individual ID",
      "value": ""
    },
    {
      "key": "Verify rec5 Household ID",
      "value": ""
    },
    {
      "key": "Verify rec5 Address ID",
      "value": ""
    },
    {
      "key": "Verify rec6 Z4FN code",
      "value": ""
    },
    {
      "key": "Verify rec6 ErrCode code",
      "value": ""
    },
    {
      "key": "Verify rec6 Individual ID length",
      "value": ""
    },
    {
      "key": "Verify rec6 Household ID",
      "value": ""
    },
    {
      "key": "Verify rec6 Address ID",
      "value": ""
    },
    {
      "key": "Verify rec2 Individual ID",
      "value": ""
    },
    {
      "key": "Verify Invalid record",
      "value": ""
    },
    {
      "key": "Verify rec1 fname",
      "value": ""
    },
    {
      "key": "HID12",
      "value": ""
    },
    {
      "key": "Verify rec2 fname",
      "value": ""
    },
    {
      "key": "Verify rec3 fname",
      "value": ""
    },
    {
      "key": "Verify rec4 fname",
      "value": ""
    },
    {
      "key": "ID15",
      "value": ""
    },
    {
      "key": "HID15",
      "value": ""
    },
    {
      "key": "AID15",
      "value": ""
    },
    {
      "key": "ID16",
      "value": ""
    },
    {
      "key": "HID16",
      "value": ""
    },
    {
      "key": "AID16",
      "value": ""
    },
    {
      "key": "AID17",
      "value": ""
    },
    {
      "key": "ID18",
      "value": ""
    },
    {
      "key": "HID18",
      "value": ""
    },
    {
      "key": "AID18",
      "value": ""
    },
    {
      "key": "ID19",
      "value": ""
    },
    {
      "key": "HID19",
      "value": ""
    },
    {
      "key": "AID19",
      "value": ""
    }
  ]
}